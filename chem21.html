<html>
<title>

document.write("CHEM21 - Empirical Formula ");

</title>

<body>
<canvas id="square" width=700 height=300></canvas>

<script>

/*
CHEM21.html - Empirical formula ....
*/

// declare variables.....
//
var problem=1;
var tries=1;
var type=1;
var score=0;
var scoredec=0.0;
var s1 = "Problem # "+problem;
var s2 = "Empirical Formula  ";
var s3 = "";//WOWEE!";
var s4="Empirical Formula ";//" Q=mc\u0394T";//"   d = m / v";
var s5, s6, s7, s8, s9, s10, s11, s12,s5c,s5d,s5e,s5f,s5g,s5h,hint; //format decimals
var s5x,s5y,s5z,s5m;
var sq="\u00b2";
var delta="\u0394"
s7=s5c=s5d=s5e=s5f=s5g=s5h=s5x=s5y=s5z=s5m=hint="";
var c,d,e,f,g,h,xx,yy,zz,sinput,sans,mm;
c=d=e=f=g=h=mm=0;

// restart(); - nope did not work...
// s1, s2, s3, s4 - problem text
//s5 - y variable setPrecision(3)
//s6 - z variable setPrecision(3)
//s7 - input testing... line 95 pe
//s8 - var -  percent error -
//s9 - var
//s10 - answer for missed 2nd time
//s11 - score
//s12 - score decimal rounded

var x=3;
var pe=0.0;

newVals(); //Problem 1 start

//x=y+z;


//function equals()  (a,b) b is the answer, a is the user input
function equals(a,b)
{
  var v1 = parseFloat(a);
  var v2 = parseFloat(b);
  pe = Math.abs((v1-v2)/v2);
  s8=pe.toPrecision(5);
  if(pe<0.011)
  {return true;}
  else{return false;}

}
//function eval() - when button clicked, check for
// first and second responses....
function eval()
{
  if(problem>10)  // do nothing after problem 10
    {
      //s1="If you score is good, have your teacher record it."
      //s2="If you want to restart, press that button below."
      //repaint();
    }
  else
{//keep working



    var input = document.getElementById("box1").value;
    sinput = input.toString();
//
//
//

    //equals(input,x);
    // cheat code......
    //s7=" input = "+input+"     x = "+x.toPrecision(3)+ "pe = "+s8;

    //s11 = "score = "+score+" / "+ (10*problem) ;
    if(sinput===sans)//equals(input,x))//(input==x) //correct first time...
      {
        alert("You answered "+input+"  correct!");
        if(tries==1)
        {
          score+=10;//10 points
          s4="GREAT!";
        }
        else {
          score+=5;//5 points
          s4="Better!";
        }

        //tries=1;
        //s4="GREAT!";
        problem++;
        newVals();

        //canvas.clear();
      }

    else //2nd try
      {

        if(tries==1) //2nd try correct
        {
          alert("mmmmm, try again..."+hint)
          s7=hint;
          tries++;

        }
        else // 2nd try not correct...next problem.
          {
            alert("answer was "+final);
            //tries=1;
            s7="answer was "+final;
            s4="next...";
            problem++;
            newVals();

          }
        }
  //}//close keep working

//problem++;
scoredec = Math.round(10.0*score/(problem-1));
//s12=scoredec.toPrecision(1);
s12=scoredec+"%";
s11 = "score = "+score+" / "+ (10*(problem-1)) +"  =  " +s12;
if(problem==1)
 s11="";
repaint();

}
}

function newVals()
{


  tries=1;

  type=Math.ceil(Math.random()*3); //3 types problems....


  // problems 1-5 1:1, problem 6-10 2:1 or 2:3 ratios

  y=Math.ceil(Math.random()*100)/10 +10;
  s5=y.toPrecision(3);
  z=Math.ceil(Math.random()*100)/10+1;
  s6=z.toPrecision(3);
  x=y*z; // (xF, ym, za)
  s9=x.toPrecision(3);
  //s7="";

  //y=c/f; // distance of Wo
  //s5=y.toPrecision(4);

  //f=
  sans="herro";
  //type=1;



  if(problem==5 || problem==9)
  {
    type=4;
  }

  //type=3;
//c,d,e,f,g
  switch(type)
  {
    case 1: //.. 1 : d : e ratio
    c=1;
    d=Math.ceil(Math.random()*4)+1;
    e=Math.ceil(Math.random()*5)+2;
//*********** TESTING TESTING
    //c=2;d=2;e=5;

    sans="C"+c+"H"+d+"O"+e;
    mm=c*12 + d*1 + e*16;
    f=100*c*12/mm;
    g=100*d/mm;
    h=100*e*16/mm;
    s5f=f.toPrecision(3);s5g=g.toPrecision(3);s5h=h.toPrecision(3);
    s7=s5f+" - "+s5g+" - "+s5h;
    xx=f/12; yy=g; zz = h/16;
    s5x=xx.toPrecision(3);s5y=yy.toPrecision(3);s5z=zz.toPrecision(3);
    s7=s5x+" mol C  "+s5y+" mol H "+s5z+" mol O";

    //x=100*45.98/142.05;
    //s10=x.toPrecision(3)+ " % ";
    s2="A compound has "+s5f+"  % C and "+s5g+"  % H and the remainder O. ";
    s3=" Find the empirical formula. ";
    //s4=" ----"+sans;
       //z=142.05;
       //s6=z.toPrecision(5);
    hint=" In a 100 g sample there are "+s7;//+" mol C "+s5y+" mol H and "+s5z+" mol O...";

    final="The empirical formula is  "+sans;

    s7="";

    //x=y/z;
    break;
     ////////////////////////

    //
    case 2: //  2:d:e

    c=2;
    d=Math.ceil(Math.random()*10)+1;  // 10-30 d  V1
    e=Math.ceil(Math.random()*4)+2;  // 20-55 e V2
    if(d%2==0 && e%2==0) d++;

    sans="C"+c+"H"+d+"O"+e;

    mm=c*12 + d*1 + e*16;
    f=100*c*12/mm;
    g=100*d/mm;
    h=100*e*16/mm;
    s5f=f.toPrecision(3);s5g=g.toPrecision(3);s5h=h.toPrecision(3);
    s7=s5f+" - "+s5g+" - "+s5h;
    xx=f/12; yy=g; zz = h/16;
    s5x=xx.toPrecision(3);s5y=yy.toPrecision(3);s5z=zz.toPrecision(3);
    s7=s5x+" mol C  "+s5y+" mol H "+s5z+" mol O";

    s2="A compound has "+s5f+"  % C and "+s5g+"  % H and the remainder O. ";
    s3=" Find the empirical formula. ";
    //s4=" case 2 ----"+sans;

    hint=" In a 100 g sample there are "+s7;

    final="The empirical formula is  "+sans;
      s7="";
    //x=y/z;
    break;
////////////
    case 3: //  3:x:y

    c=2;
    d=Math.ceil(Math.random()*10)+1;  // 10-30 d  V1
    e=Math.ceil(Math.random()*4)+2;  // 20-55 e V2
    if(d%2==0 && e%2==0) d++;
    x=Math.ceil(Math.random()*5000)/1000 + 1.0;
    s10=x.toPrecision(4)+ " ";

    sans="C"+c+"H"+d+"O"+e;
    mm=c*12 + d*1 + e*16;

    f=x*c*12/mm;
    g=x*d/mm;
    h=x*e*16/mm;
    s5f=f.toPrecision(4);s5g=g.toPrecision(4);s5h=h.toPrecision(4);
    s7=s5f+" - "+s5g+" - "+s5h;
    xx=f/12; yy=g; zz = h/16;
    s5x=xx.toPrecision(3);s5y=yy.toPrecision(3);s5z=zz.toPrecision(3);
    s7=s5x+" mol C  "+s5y+" mol H "+s5z+" mol O";

    s2="A "+s10+" g sample of a compound has "+s5f+"  g C and "+s5g+"  g H  ";
    s3=" with the remainder of mass O.  Find the empirical formula. ";
    //s4=" case 333----"+sans+" "+s10;

    hint=" In this sample there are "+s7;

    final="The empirical formula is  "+sans;

    s7="";
    break;
////////


case 4: //  3:x:y

c=3;
d=Math.ceil(Math.random()*5)+4;  // 10-30 d  V1
e=Math.ceil(Math.random()*3)+3;  // 20-55 e V2
if(d%3==0 && e%3==0) d++;

sans="C"+c+"H"+d+"O"+e;
mm=c*12 + d*1 + e*16;
f=100*c*12/mm;
g=100*d/mm;
h=100*e*16/mm;
s5f=f.toPrecision(3);s5g=g.toPrecision(3);s5h=h.toPrecision(3);
s7=s5f+" - "+s5g+" - "+s5h;
xx=f/12; yy=g; zz = h/16;
s5x=xx.toPrecision(3);s5y=yy.toPrecision(3);s5z=zz.toPrecision(3);
s7=s5x+" mol C  "+s5y+" mol H "+s5z+" mol O";

s2="A compound has "+s5f+"  % C and "+s5g+"  % H and the remainder O. ";
s3=" Find the empirical formula. ";
//s4=" case 333----"+sans;

hint=" In a 100 g sample there are "+s7;

final="The empirical formula is  "+sans;

s7="";
break;






    }


    if(problem==11)
    {
      s1="DONE!";
      s2="Record the score with a teacher.";
      s3="or restart for a better grade :)";
    }
    else
     s1="Problem "+problem;

     s11 = "score = "+score+" / "+ (10*(problem-1)) ;
     if(problem==1)
      s11="";

  //repaint(); *** ERROR FOR SOME REASON????
} //end newVals()

function restart()
{
  problem=1;
  score=0;
  tries=1;
  s1 = "Problem # "+problem;
  s2 = "WOWEE!";
  s3 = "HI";
  s4="";
  s7 = "restarted.....";
  s11="";

  //need code from newVals here for restarting program..
  newVals();

  repaint();
}

function repaint()
{
  //
  var g = canvas.getContext("2d");
  canvas.width=canvas.width; //clears canvas each time.
  g.font="16px Arial";
  g.fillText(s1,20,20);
  g.fillText(s2,20,50);
  g.fillText(s3,20,80);
  g.fillText(s4,20,110);
  g.fillText(s7,20,140);
  g.fillText(s11,20,170);

}

var canvas = document.getElementById("square");
repaint();



document.write("<br>");
//document.write(x);
document.write("<br>");
document.write("\n CHEM21.html");


// END OF SCRIPT!!!!
</script>

<br>
<input id="box1" placeholder = "enter answer">
<br>
<br><br>
<button onclick="eval()" id = "button1">Check answer</button>

<br>
<br><br>
<button onclick="restart()" id = "button2">Restart</button>

</body>

</html>
